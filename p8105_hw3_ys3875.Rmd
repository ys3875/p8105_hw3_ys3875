---
title: "p8105_hw3_ys3875"
author: "Yanhao Shen"
date: "2024-10-11"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
```

Q2.
```{r}
demographic_data =
  read_csv("nhanes_covar.csv", na = c('NA', ' ', '.'), col_names = TRUE, skip = 4) |>
  janitor::clean_names() |>
  filter(age>=21) |>
  mutate(
    sex=
      case_match(
        sex,
        1~ 'male',
        2~ 'female'),
    education=
      case_match(
        education,
        1~ 'Less than high school',
        2~ 'High school equivalent',
        3~ 'More than high school'),
    sex = as.factor(sex),
    education = as.factor(education)
  )

accelerometer_data = 
  read_csv("nhanes_accel.csv", na=c('NA',' ','.')) |>
  janitor::clean_names()
  
dd_table <- demographic_data |>
  group_by(education,sex) |>
  summarise(count=n(), .groups = 'drop')|>
  spread(key = sex, value=count,fill = 0)
dd_table

dd_plot <- demographic_data |>
  ggplot(aes(x=education, y=age, fill=sex))+
  geom_violin()+
  theme_minimal()
dd_plot
##
```
